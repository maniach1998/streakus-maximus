<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>{{{title}}}</title>

	<link href="/public/styles/tailwind.css" rel="stylesheet" />
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href='https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800&display=swap'
		rel="stylesheet" />

</head>

<body>
	<header class="z-[999] fixed p-4 border-b border-muted bg-background/50 backdrop-blur-sm w-full">
		<nav>
			<div class="flex items-center justify-between">
				<ul class="flex items-center list-none gap-5">
					{{#if isAuthenticated}}
					<li><a href="/dashboard">Dashboard</a></li>
					<li><a href="/habits">Habits</a></li>
					{{else}}
					<li><a href="/">Home</a></li>
					{{/if}}
				</ul>

				<ul class="flex items-center list-none gap-5">
					{{#if isAuthenticated}}
					<li><a href="/habits/new" class="hidden md:button"><i data-lucide="plus" class="size-4"></i> New
							habit</a></li>
					<li class="relative group">
						<button type="button" class="button button-secondary" aria-expanded="false" aria-haspopup="true">
							<i data-lucide="user-circle" class="size-5"></i>
							<i data-lucide="chevron-down" class="size-4"></i>
						</button>
						<div
							class="absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-card border border-border shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all">
							<div class="py-1" role="menu">
								<a href="/profile"
									class="block px-4 py-2 text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors"
									role="menuitem">
									Profile
								</a>
								<a href="/settings"
									class="block px-4 py-2 text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors"
									role="menuitem">
									Settings
								</a>
								<div class="border-t border-border my-1"></div>
								<a href="/auth/logout"
									class="block px-4 py-2 text-sm text-destructive hover:bg-destructive/10 transition-colors"
									role="menuitem">
									Log out
								</a>
							</div>
						</div>
					</li>
					{{else}}
					<li><a href="/auth/login" class="button button-secondary">Log in</a></li>
					{{/if}}

				</ul>
			</div>
		</nav>
	</header>

	<main>
		{{{body}}}
	</main>

	<script type="module">
		import { markHabitComplete } from '/public/js/habitCard.js'
		import { resendVerification } from '/public/js/settings.js'

		// bind functions
		window.markHabitComplete = markHabitComplete
		window.resendVerification = resendVerification
	</script>

	<script src="https://unpkg.com/lucide@latest"></script>
	<script>
		lucide.createIcons()
	</script>
</body>

</html>